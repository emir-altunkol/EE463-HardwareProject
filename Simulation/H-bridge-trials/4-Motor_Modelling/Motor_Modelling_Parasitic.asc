Version 4
SHEET 1 2940 680
WIRE 368 -592 336 -592
WIRE 480 -592 448 -592
WIRE 800 -592 768 -592
WIRE 912 -592 880 -592
WIRE 2720 -496 2304 -496
WIRE 1936 -464 1936 -512
WIRE 2304 -464 2304 -496
WIRE 2720 -448 2720 -496
WIRE 368 -432 336 -432
WIRE 480 -432 448 -432
WIRE 800 -432 768 -432
WIRE 912 -432 880 -432
WIRE 1936 -336 1936 -384
WIRE 2720 -272 2720 -368
WIRE 1936 -176 1936 -256
WIRE 256 -144 224 -144
WIRE 416 -144 336 -144
WIRE 608 -144 416 -144
WIRE 752 -144 688 -144
WIRE 784 -144 752 -144
WIRE 928 -144 864 -144
WIRE 992 -144 928 -144
WIRE 1344 -144 992 -144
WIRE 928 -112 928 -144
WIRE 1344 -112 1344 -144
WIRE 224 -80 224 -144
WIRE 992 -64 992 -144
WIRE 2720 -64 2720 -192
WIRE 752 16 752 -144
WIRE 1936 16 1936 -96
WIRE 928 32 928 -16
WIRE 928 32 912 32
WIRE 1344 32 1344 -16
WIRE 1344 32 1328 32
WIRE 224 48 224 0
WIRE 416 64 416 -144
WIRE 928 80 928 32
WIRE 992 80 992 0
WIRE 992 80 928 80
WIRE 1056 80 992 80
WIRE 1344 80 1344 32
WIRE 1344 80 1216 80
WIRE 1936 112 1936 96
WIRE 2304 112 2304 -384
WIRE 2720 112 2720 16
WIRE 2720 112 2304 112
WIRE 928 176 928 80
WIRE 992 176 992 80
WIRE 1344 176 1344 80
WIRE 224 192 224 128
WIRE 928 288 928 272
WIRE 928 288 912 288
WIRE 1344 288 1344 272
WIRE 1344 288 1328 288
WIRE 224 304 224 256
WIRE 416 304 416 128
WIRE 416 304 224 304
WIRE 608 304 416 304
WIRE 752 304 752 80
WIRE 752 304 688 304
WIRE 928 304 928 288
WIRE 928 304 752 304
WIRE 992 304 992 256
WIRE 992 304 928 304
WIRE 1344 304 1344 288
WIRE 1344 304 992 304
WIRE 992 320 992 304
WIRE 224 336 224 304
FLAG 224 336 0
FLAG 880 -32 V_G1
IOPIN 880 -32 In
FLAG 880 256 V_G2
IOPIN 880 256 In
FLAG 1296 -32 V_G3
IOPIN 1296 -32 In
FLAG 1296 256 V_G4
IOPIN 1296 256 In
FLAG 1328 32 V_S3
IOPIN 1328 32 In
FLAG 912 32 V_S1
IOPIN 912 32 In
FLAG 912 288 V_S2
IOPIN 912 288 In
FLAG 1328 288 V_S4
IOPIN 1328 288 In
FLAG 912 -592 V_G1
IOPIN 912 -592 Out
FLAG 768 -592 V_S1
IOPIN 768 -592 Out
FLAG 912 -432 V_G2
IOPIN 912 -432 Out
FLAG 768 -432 V_S2
IOPIN 768 -432 Out
FLAG 480 -592 V_G3
IOPIN 480 -592 Out
FLAG 336 -592 V_S3
IOPIN 336 -592 Out
FLAG 480 -432 V_G4
IOPIN 480 -432 Out
FLAG 336 -432 V_S4
IOPIN 336 -432 Out
FLAG 1936 -512 HB+
IOPIN 1936 -512 In
FLAG 1056 80 HB+
IOPIN 1056 80 Out
FLAG 1216 80 HB-
IOPIN 1216 80 Out
FLAG 1936 112 HB-
IOPIN 1936 112 In
SYMBOL voltage 48 64 R0
WINDOW 3 -458 10 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PWL file=Rectifier_Single_Phase.txt
SYMATTR InstName V_DC
SYMBOL nmos 880 -112 R0
SYMATTR InstName M1
SYMATTR Value IXTH88N30P
SYMBOL nmos 1296 -112 R0
SYMATTR InstName M3
SYMATTR Value IXTH88N30P
SYMBOL voltage 896 -432 R90
WINDOW 0 37 30 VLeft 2
WINDOW 3 -54 270 VLeft 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 10 1.02866m 1p 1p 0.02134m 0.05m)
SYMBOL voltage 896 -592 R90
WINDOW 0 37 30 VLeft 2
WINDOW 3 -54 270 VLeft 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 10 1m 1p 1p 0.02866m 0.05m)
SYMBOL voltage 464 -432 R90
WINDOW 0 37 30 VLeft 2
WINDOW 3 -54 270 VLeft 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 10
SYMBOL voltage 464 -592 R90
WINDOW 0 37 30 VLeft 2
WINDOW 3 -54 270 VLeft 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL voltage 1936 0 R0
SYMATTR InstName V_sense_1
SYMATTR Value 0
SYMBOL voltage 2720 -80 R0
SYMATTR InstName V_sense_2
SYMATTR Value 0
SYMBOL ind 1920 -480 R0
SYMATTR InstName Motor_inductance
SYMATTR Value {L_motor}
SYMBOL ind 2704 -464 R0
SYMATTR InstName Inertia_constant
SYMATTR Value {L_inertia}
SYMBOL res 1920 -352 R0
SYMATTR InstName Motor_resistance
SYMATTR Value {R_motor}
SYMBOL res 2704 -288 R0
SYMATTR InstName Friction
SYMATTR Value {R_loss}
SYMBOL bv 2304 -480 R0
SYMATTR InstName V_torque
SYMATTR Value V=I(V_sense_1)*K_t
SYMBOL bv 1936 -192 R0
SYMATTR InstName Back_emf
SYMATTR Value V=I(V_sense_2)*K_emf
SYMBOL voltage 224 32 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 320
SYMBOL nmos 880 176 R0
SYMATTR InstName M2
SYMATTR Value IXTH88N30P
SYMBOL nmos 1296 176 R0
SYMATTR InstName M4
SYMATTR Value IXTH88N30P
SYMBOL res 352 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL ind 208 -96 R0
SYMATTR InstName L1
SYMATTR Value 0.3m
SYMBOL cap 400 64 R0
SYMATTR InstName C1
SYMATTR Value 470µ
SYMATTR SpiceLine Rser=10m
SYMBOL diode 240 256 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL ind 704 -160 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L2
SYMATTR Value 50n
SYMBOL ind 704 288 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L3
SYMATTR Value 50n
SYMBOL cap 736 16 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMATTR SpiceLine Rser=0.5m
SYMBOL ind 880 -160 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L4
SYMATTR Value 5n
SYMBOL cap 976 -64 R0
SYMATTR InstName C3
SYMATTR Value 1n
SYMATTR SpiceLine Rser=0.1m
SYMBOL cap 976 176 R0
SYMATTR InstName C4
SYMATTR Value 1n
SYMATTR SpiceLine Rser=0.1m
TEXT -240 368 Left 2 !.tran 0 56m 0 0.001m
TEXT 2360 -200 Left 2 !.PARAM K_t=0.2\n.PARAM K_emf = 0.25\n.PARAM L_motor = 1000u\n.PARAM R_motor =1.2\n.PARAM R_loss = 0.1m\n.PARAM L_inertia = 20u
TEXT 536 -56 Left 2 !.ic V(n006)=320
